# 배틀씬 작업 로그

> 배틀씬 UI/UX 작업 진행 상황 기록

---

## 완료된 작업

### 1. EnemyCard UI 통일
**상태**: 완료

CharacterCard와 동일한 레이아웃으로 EnemyCard 재설계

| 변경 사항 | 설명 |
|----------|------|
| HP 바 위치 | 카드 본체 위로 이동 |
| 방패 UI | 방어력 0: 회색 방패, 1+: 파란색 숫자 |
| 카드 테두리 | 보라색 유지 (적 구분) |
| 다음 액션 | HP 바 위에 표시 |

**관련 파일**: `EnemyCard.tsx`

---

### 2. 캐릭터 정렬 수정
**상태**: 완료

전투 영역에서 유저/적 캐릭터 카드 정렬 개선

| 변경 사항 | 설명 |
|----------|------|
| 수직 위치 | 전투 영역 중앙 (items-center) |
| 수평 정렬 | 유저 캐릭터에 스페이서 추가하여 카드 본체 수평 일치 |

**관련 파일**: `BattleScreen.tsx`

---

### 3. 문서 정리
**상태**: 완료

배틀씬 문서 구조 개선

| 문서 | 변경 사항 |
|------|----------|
| screen.md | 레이아웃 영역명 추가 (전투 영역 / 플레이어 영역) |
| animation.md | 애니메이션 관련 내용 분리 (신규) |
| ui-ux.md | 인터랙션 중심으로 간소화 |

---

### 4. 카드 프리뷰 시스템
**상태**: 완료

공격 카드 드래그 시 데미지 프리뷰 표시

| 기능 | 설명 |
|------|------|
| 활성화 조건 | 공격 카드 드래그 + 적 영역 호버 |
| HP 바 프리뷰 | 예상 감소량을 주황색으로 표시 (깜빡임) |
| 데미지 숫자 | HP 바 위에 "-8" 형태로 표시 |
| 데미지 계산 | 적 방어력 고려한 실제 HP 데미지 |

**관련 파일**: `HPBar.tsx`, `useDrag.ts`, `BattleScreen.tsx`, `EnemyCard.tsx`

---

## 수정된 파일 목록

| 파일 | 변경 내용 |
|------|----------|
| `dev/proto/src/components/battle/EnemyCard.tsx` | UI 구조 재설계, previewDamage prop |
| `dev/proto/src/components/screens/BattleScreen.tsx` | 정렬 수정, 프리뷰 데미지 계산 |
| `dev/proto/src/components/common/HPBar.tsx` | previewDamage prop, 프리뷰 UI |
| `dev/proto/src/hooks/useDrag.ts` | currentZone 상태 추가 |

---

## 현재 구현 상태

### 배틀씬 구성 요소

```
┌─────────────────────────────────────────────────────────┐
│  【 전투 영역 】                                         │
│                                        [다음 액션]      │
│   ○ 방패 ┌─ HP 바 ─┐          ○ 방패 ┌─ HP 바 ─┐      │
│   ┌─────────────────┐          ┌─────────────────┐      │
│   │   유저 캐릭터   │          │    적 캐릭터    │      │
│   └─────────────────┘          └─────────────────┘      │
│                                                         │
├─────────────────────────────────────────────────────────┤
│  【 플레이어 영역 】                                     │
│  ○ 에너지                                      ○ 다음턴 │
│  ○ 덱             (부채꼴 손패)                         │
└─────────────────────────────────────────────────────────┘
```

### 구현된 인터랙션

- [x] 카드 드래그 앤 드롭
- [x] 드롭 영역 하이라이트 (유효: 초록 / 무효: 빨강)
- [x] 손패 부채꼴 배열 + 호버 효과
- [x] 데미지 프리뷰 (공격 카드)
- [x] 전투 애니메이션 (Peek & Hit)
- [x] 카드 드로우/버리기 애니메이션

---

## 다음 작업 제안

- 방어 카드 프리뷰 (플레이어 방어력 증가 표시)
- 버프/디버프 프리뷰
- 카드 효과 툴팁
